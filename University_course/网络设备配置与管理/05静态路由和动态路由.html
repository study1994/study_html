<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/style.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="http://zhao-study.gitee.io/code_html/tools/d3@6.7.0"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.7"></script><script>(getMarkmap => {
          window.WebFontConfig = {
            custom: {
              families: ['KaTeX_AMS', 'KaTeX_Caligraphic:n4,n7', 'KaTeX_Fraktur:n4,n7', 'KaTeX_Main:n4,n7,i4,i7', 'KaTeX_Math:i4,i7', 'KaTeX_Script', 'KaTeX_SansSerif:n4,n7,i4', 'KaTeX_Size1', 'KaTeX_Size2', 'KaTeX_Size3', 'KaTeX_Size4', 'KaTeX_Typewriter']
            },
            active: () => {
              getMarkmap().refreshHook.call();
            }
          };
        })(() => window.markmap)</script><script src="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js" defer></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.2.0/dist/index.umd.min.js"></script><script>(r => {
                setTimeout(r);
              })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, data) => {
        const {
          Markmap
        } = getMarkmap();
        window.mm = Markmap.create('svg#mindmap', getOptions == null ? void 0 : getOptions(), data);
      })(() => window.markmap,null,{"t":"root","d":0,"v":"","c":[{"t":"heading","d":1,"p":{"lines":[0,1]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3m0MUg1zcAyE21Btz928xb3a\">1路由器基础知识</a>","c":[{"t":"heading","d":2,"p":{"lines":[1,2]},"v":"是工作在<font color=Blue>网络层</font>上连接多个相同或不同类型网络的<font color=Blue>网络互联设备</font>(最佳路径传送数据)"},{"t":"heading","d":2,"p":{"lines":[2,3]},"v":"<a href=\"http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEPsMq6N9LOjFv*i2eRyy90hqlv1xZu2Wot6HdMUWvuK.br0QnwCFV5pHiTcG3PIYxi0*aJ28WL3tAganOiHmgJQ!/b&amp;bo=OgWnAQAAAAABF6k!&amp;rf=viewer_4\">路由器图片</a>"},{"t":"heading","d":2,"p":{"lines":[3,4]},"v":"路由器的外部接口","c":[{"t":"list_item","d":4,"p":{"lines":[4,7]},"v":"支持的接口类型<br>\n接口类型由<font color=Blue>标识符+至少一位数字</font>组成<br>\n由<font color=Blue>控制端口Console</font>与<font color=Blue>终端管理设备</font>,对路由器进行初始配置"},{"t":"list_item","d":4,"p":{"lines":[7,9]},"v":"模块化路由器<a href=\"http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEEKCdPsvMx.Urjp*FFAlNF3AOB4zLSUERIvqVPRupalLyIV0JA66H1I9qCfdCSI45oDvV*qSDyPvoepkACZpPlE!/b&amp;bo=cgMNAQAAAAABF00!&amp;rf=viewer_4\">路由器的外部接口图片</a><br>\n功能接口类型及部分扩展功能可以<font color=Blue>根据用户的实际需求</font>来配置"}]},{"t":"heading","d":2,"p":{"lines":[9,10]},"v":"路由器的工作原理","c":[{"t":"bullet_list","d":3,"p":{"lines":[10,11]},"v":"","c":[{"t":"list_item","d":4,"p":{"lines":[10,11]},"v":"路由选择:确定数据传输到目标地址的最佳路径"}]},{"t":"heading","d":3,"p":{"lines":[11,12]},"v":"路由算法"},{"t":"heading","d":3,"p":{"lines":[12,13]},"v":"路由表","c":[{"t":"bullet_list","d":4,"p":{"lines":[13,21]},"v":"","c":[{"t":"list_item","d":5,"p":{"lines":[13,14]},"v":"保存着各种传输路径的信息"},{"t":"list_item","d":5,"p":{"lines":[14,21]},"v":"每项路由条目包含<br>\n(1)<font color=Blue>网络ID</font>：它包含已知存在的网络，一般通过静态配置或路由选择协议获取<br>\n(2)<font color=Blue>转发地址</font>：<br>\n如果目的IP地址所在的网络和当前路由器不直接连接时，路由表条目中会出现下一跳路由器的IP地址<br>\n对于主机或路由器直接连接的网络，转发地址字段可能是连接到网络的接口地址<br>\n(3)<font color=Blue>度量值</font>：根据路由选择协议指定的准则给每条路径分配的值,度量值最小的路由为首选路由<br>\n(4)<font color=Blue>接口</font>：是数据报转发所使用的路由器接口信息，一般为端口号或其他逻辑标识符"}]},{"t":"heading","d":4,"p":{"lines":[21,22]},"v":"路由转发流程:","c":[{"t":"list_item","d":6,"p":{"lines":[22,33]},"v":"当路由器从端口接收到<font color=Blue>数据帧</font>时，首先检查数据目的地址字段中的<font color=Blue>数据链路标识</font><br>\n(1)如果标识符是路由器端口标识符或广播标识符，则从数据帧中去掉帧封装，将剥离出来的报文传递给网络层。<br>\n然后，路由器检查数据报文的<font color=Blue>目的地IP地址</font>，<br>\n(a)如果目的地IP地址是<font color=Blue>路由器端口IP地址或者所有主机的广播地址</font>，则继续检查报文协议字段，根据其代表的协议向相应的内部进程发送数据。<br>\n(b)如果数据报文的目的地IP地址<font color=Blue>不是路由器端口IP地址或者所有主机的广播地址</font>，即报文需要继续路由到下一跳路由器，则查看本地路由表<br>\n查找是否存在能与目的IP地址完全相同的条目，即网络号和主机号都要相同（网络号和主机号相关知识请参考下一届内容）<br>\n(ba)如果<font color=Blue>查找成功</font>，则把报文发送到目的地IP地址。<br>\n(bb)若上述<font color=Blue>查找失败</font>，则重新查看路由表，查找能与目的地IP地址中的网络号相同的条目。<br>\n(bba)如果<font color=Blue>查找成功&lt;</font>，把报文发送到指定的下一跳IP地址或直接连接的网络接口。如果多于一项条目与之匹配，则继续匹配子网位，直到实现最佳匹配<br>\n(bbb)若上述<font color=Blue>查找失败</font>，则重新查看路由表，查找是否存在默认路由。查找成功，按照默认路由将报文转发。<br>\n(2)若上述查找都失败，则该报文被丢弃；同时路由器向发送该数据的源IP地址主机发送ICMP报文，报告网络不可达信息"}]}]}]}]},{"t":"heading","d":1,"p":{"lines":[34,35]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3q0X1N3g4AlT2dLYl21mpgYZ\">2IP地址和子网掩码</a>","c":[{"t":"heading","d":2,"p":{"lines":[35,36]},"v":"IP地址-<font color=green>网络号和主机号</font>","c":[{"t":"list_item","d":4,"p":{"lines":[36,37]},"v":"<font color=green>网络号(网络地址)</font>:用于标识大规模TCP/IP网际网络（即由网络组成的网络）内的<font color=green>单个网段</font>"},{"t":"list_item","d":4,"p":{"lines":[37,38]},"v":"<font color=green>主机号(主机地址)</font>，用于识别每个网络内部的<font color=green>TCP/IP节点（工作站、服务器、路由器或其他TCP/IP设备）</font>"},{"t":"list_item","d":4,"p":{"lines":[38,40]},"v":"IP地址的长度为<font color=green>32位(4字节)</font>，将每个字节转换为十进制数表示并用点分隔<br>\n11000000 10101000 00001011 00010001-&gt;192.168.11.17"},{"t":"list_item","d":4,"p":{"lines":[40,46]},"v":"<a href=\"http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrELRcyF3TwtakPyf5jdt4GoaFs1MbVEnUzOe0LgcI4kKD0sbfsBeP9cY.mxV8wZQplnk9BggdsI*.ULi6DUmhPMc!/b&amp;bo=cAOiAgAAAAABF.M!&amp;rf=viewer_4\">IP地址的分类.jpg</a><br>\nA类地址:大型网络-8比特位(第一个字节)作为网络号，后24比特位（后三个字节）作为主机号<br>\nB类地址:中等规模的网络-16比特位（前两个字节）作为网络号，后16比特位（后两个字节）作为主机号<br>\nC类地址:小型网络-24比特位（前三个字节）作为网络号，后8比特位（最后一个字节）作为主机号<br>\nD类地址:多路广播组用户<br>\nE类地址:保留用于实验"},{"t":"list_item","d":4,"p":{"lines":[46,47]},"v":"<a href=\"http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrENhv61pax1QLayTmCRgDIHlsw3amfKyZfGALUZIze3zfL4tYI2764We0bkeOkKn2kUjBnGuCD6UQHXtbX8O86iU!/b&amp;bo=5wNEAQAAAAABF5E!&amp;rf=viewer_4\">特殊IP地址.jpg</a>"}]},{"t":"heading","d":2,"p":{"lines":[47,48]},"v":"IP地址的子网划分","c":[{"t":"heading","d":3,"p":{"lines":[48,49]},"v":"子网掩码(32个比特位)","c":[{"t":"list_item","d":5,"p":{"lines":[49,50]},"v":"区分IP地址的网络位和主机位"},{"t":"list_item","d":5,"p":{"lines":[50,53]},"v":"将网络划分为多个子网(判断两台主机是否在同一个网络区段内)<br>\nIP地址为168.95.116.39+子网掩码为255.255.0.0-&gt;网络号168.95，主机号116.39<br>\nIP地址为168.95.120.28+子网掩码为255.255.0.0-&gt;网络号168.95，主机号120.28"}]},{"t":"heading","d":3,"p":{"lines":[53,54]},"v":"<a href=\"http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEP7ukprabtBL1GTtyUK37mqq5rqdnt1cNMLGRh4OCLgDd6.ukZCzZ2qxPN2*pb9MS2Vg1CdulmmJQ8ouXGQybbo!/b&amp;bo=BgMHAwAAAAABFzE!&amp;rf=viewer_4\">子网划分.jpg</a>","c":[{"t":"list_item","d":5,"p":{"lines":[54,59]},"v":"根据所需网络数或子网中的主机数计算需要从IP地址中借用的主机位位数<br>\n①主机位有M位(看后面主机号)，向主机位部分借用n位来划分子网，可划分出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>个子网。<br>\n反之，知道所需网络数，也可以计算出所需借用的主机位位数<br>\n②主机位有M位，划分子网后主机位有m位，则最多可容纳主机数量为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mrow><mi>m</mi><mo>−</mo><mn>2</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">2^{m-2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>台。<br>\n反之，知道子网中的主机数量，也可以计算出所需主机位数。用当前主机位M减去划分子网后的m位，即可得到需借用的主机位位数。"},{"t":"list_item","d":5,"p":{"lines":[59,62]},"v":"为各子网编码<br>\n得到确切的借用的主机位位数后，将IP地址用二进制表示，按照借用主机位从全0到全1顺序写出，<br>\n并将其转换为常见的十进制表示方法，即可得到所有子网编码"},{"t":"list_item","d":5,"p":{"lines":[62,64]},"v":"计算子网掩码<br>\n将除主机位之外，即网络位和子网位全部写为1，即可得到当前网络的子网掩码"},{"t":"list_item","d":5,"p":{"lines":[64,66]},"v":"计算各子网的广播地址<br>\n将IP地址的网络位和子网位全部写为1，主机位写为0，即可得各子网的广播地址"},{"t":"list_item","d":5,"p":{"lines":[66,68]},"v":"列出各个子网的IP地址范围<br>\n去除主机位全0（用于子网地址）和全1（用于广播地址）的情况，计算各子网的IP地址范围"}]},{"t":"heading","d":3,"p":{"lines":[68,69]},"v":"可变长子网掩码","c":[{"t":"list_item","d":5,"p":{"lines":[69,72]},"v":"对同一个主网络在不同的位置使用不同的子网掩码<br>\n划分子网并保留足够的主机数的同时，将子网进一步分成多个小子网<br>\n将网络划分为三级或更多级子网"}]},{"t":"heading","d":3,"p":{"lines":[72,73]},"v":"网关","c":[{"t":"list_item","d":5,"p":{"lines":[73,75]},"v":"一个网络通向其他网络的IP地址<br>\n网关的IP地址是具有路由功能的设备的IP地址，如路由器、三层交换机等"},{"t":"list_item","d":5,"p":{"lines":[75,76]},"v":"设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信"}]}]}]},{"t":"heading","d":1,"p":{"lines":[77,78]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3AvTAl21okgB2m3c3i3q23hQ\">3路由器的基本配置</a>","c":[{"t":"heading","d":2,"p":{"lines":[78,79]},"v":"1．网络拓扑"},{"t":"heading","d":2,"p":{"lines":[79,80]},"v":"2．网络参数"},{"t":"heading","d":2,"p":{"lines":[80,81]},"v":"3．配置过程"},{"t":"heading","d":2,"p":{"lines":[81,82]},"v":"4．查看配置信息"},{"t":"heading","d":2,"p":{"lines":[82,83]},"v":"5．测试配置结果"}]},{"t":"heading","d":1,"p":{"lines":[84,85]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF20jwaZ26N45n2OwtTo2DMGrW\">4静态路由</a>","c":[{"t":"heading","d":2,"p":{"lines":[85,86]},"v":"静态路由简介","c":[{"t":"heading","d":3,"p":{"lines":[86,87]},"v":"网络管理员手动配置的路由信息","c":[{"t":"list_item","d":5,"p":{"lines":[87,88]},"v":"网络拓扑结构比较简单"},{"t":"list_item","d":5,"p":{"lines":[88,89]},"v":"网络管理员需要控制链路或控制路由表(网络的保密性要求较高)"},{"t":"list_item","d":5,"p":{"lines":[89,90]},"v":"网络仅通过单个ISP(Internet Service Provider，互联网服务提供商)接入Internet，则该ISP就是网络唯一的Internet出口，所以不必要使用动态路由"},{"t":"list_item","d":5,"p":{"lines":[90,91]},"v":"路由器的资源有限，无法运行路由选择协议"}]}]},{"t":"heading","d":2,"p":{"lines":[91,92]},"v":"静态路由配置","c":[{"t":"heading","d":3,"p":{"lines":[92,93]},"v":"静态路由配置命令","c":[{"t":"heading","d":4,"p":{"lines":[93,94]},"v":"全局配置命令:<code>ip route 目的网络地址 目的网络子网掩码 转发路径的方式</code>"},{"t":"heading","d":4,"p":{"lines":[94,95]},"v":"转发路径的方式","c":[{"t":"heading","d":5,"p":{"lines":[95,96]},"v":"路由器的物理出接口:转发路径指向本地接口，此时信息由路由器本地接口转发出去"},{"t":"heading","d":5,"p":{"lines":[96,97]},"v":"与对端路由器相连接口的IP地址:转发路径指向与对端路由器相连接口的IP地址，即指向下一跳IP地址"}]}]}]},{"t":"heading","d":2,"p":{"lines":[97,98]},"v":"配置默认路由","c":[{"t":"heading","d":3,"p":{"lines":[98,99]},"v":"默认路由简介","c":[{"t":"list_item","d":5,"p":{"lines":[99,100]},"v":"当路由表中没有对应于目标网络的路由条目时，路由器将使用默认路由转发数据"},{"t":"list_item","d":5,"p":{"lines":[100,101]},"v":"配置默认路由的命令:<code>ip route 0.0.0.0 0.0.0.0 转发路径的方式 Metric值</code>"}]}]}]},{"t":"heading","d":1,"p":{"lines":[102,103]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF2JagNA34IkuY2C5EnM2mRogV\">5动态路由</a>","c":[{"t":"heading","d":2,"p":{"lines":[103,104]},"v":"（一）路由协议简介","c":[{"t":"heading","d":3,"p":{"lines":[104,105]},"v":"1．RIP（路由信息协议）"},{"t":"heading","d":3,"p":{"lines":[105,106]},"v":"2．OSPF（开放式最短路径优先）"}]},{"t":"heading","d":2,"p":{"lines":[106,107]},"v":"（二）RIP动态路由配置","c":[{"t":"heading","d":3,"p":{"lines":[107,108]},"v":"1．RIP动态路由配置命令"},{"t":"heading","d":3,"p":{"lines":[108,109]},"v":"2．RIP动态路由配置实例"}]},{"t":"heading","d":2,"p":{"lines":[109,110]},"v":"（三）OSPF动态路由配置","c":[{"t":"heading","d":3,"p":{"lines":[110,111]},"v":"1．OSPF动态路由配置命令"},{"t":"heading","d":3,"p":{"lines":[111,112]},"v":"2．OSPF动态路由配置实例"}]}]},{"t":"heading","d":1,"p":{"lines":[113,114]},"v":"<a href=\"https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3umRIt1kGAVi2M_SeR322s8l\">6实现用户对内网服务器和Internet的访问</a>"}],"p":{}})</script>
</body>
</html>
