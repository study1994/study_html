<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>4数据操纵与查询</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://study1994.github.io/study_html/npm/prism.css"><link rel="stylesheet" href="https://study1994.github.io/study_html/npm/markmap-toolbar@0.13.5/dist/style.css">
</head>
<body>
    <svg id="mindmap"></svg>
    <script src="https://study1994.github.io/study_html/npm/d3@6.7.0"></script>
    <script src="https://study1994.github.io/study_html/npm/markmap-view@0.13.5"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full"></script>
    <script>
        (r => {
            setTimeout(r);
        })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{'type': 'root', 'depth': 0, 'content': '', 'children': [{'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">数据操纵</p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">插入数据</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SQL命令插入数据</p>\n<p>数据表<code>S</code>中添加一条学生记录<code>(11001,冯明,男,计算机,18)</code><br>\n<code>INSERT INTO S VALUES(\'11001\',\'冯明\',\'男\',\'计算机\',18)</code><br>\n数据表<code>S</code>中添加一条学生记录<code>(11002,陈月,女)</code><br>\n<code>INSERT INTO S (SNo,SN,Sex) VALUES(\'11002\',\'陈月\',\'女\')</code><br>\n不指定列名,则在Dept与Age属性列对应字段给出明确的空值,具体SQL命令如下：<br>\n<code>INSERT INTO S VALUES(\'11002\',\'陈月\',\'女\',NULL,NULL)</code><br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SSMS插入数据</p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">修改数据</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SQL命令修改数据</p>\n<p>将学生“冯明”转入自动化系,使用<code>WHERE</code>只对部分记录进行修改<br>\nUPDATE S SET Dept=\'自动化 WHERE SN=\'冯明\'<br>\n将所有学生的年龄增加1岁,对表中所有记录进行修改<br>\nUPDATE S SET Age=Age+1<br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SSMS修改数据</p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">删除数据</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SQL命令删除数据</p>\n<p>删除学生<code>“冯明”</code>的记录<br>\nDELETE FROM S WHERE SN= \'冯明\'<br>\n删除数据表<code>S</code>的所有记录,删除数据表中的所有记录,但数据表的结构仍然存在<br>\nDELETE FROM S<br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">用SSMS删除数据</p>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">单表查询</p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">单表查询命令</p>只对一个数据表进行查询<br>\nSELECT [ALL|DISTINCT] <列名> [[AS] <列别名>] [ , N ]<br>\nFROM <表名> [[AS] <表别名>]<br>\n[WHERE <条件1>]<br>\n[GROUP BY <列名1> [HAVING <条件2>] ]<br>\n[ORDER BY <列名2> [ASC|DESC]]<br>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">SNo(学号)/TNo(教师号)、SN(学生姓名)/TN(教师姓名)、CNo(课程代号)/Dept(课程名称)、Grade(分数)、Prof(职称)/Sal(工资)、SN(姓名)</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">无条件查询与条件查询</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">无条件查询</p>\n<p>从数据表S中查询所有学生的学号、姓名和性别<br>\n<code>SELECT SNo,SN,Sex FROM S</code><br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">条件查询</p>\n<p>从数据表SC中查询成绩大于80分的学生选课信息[Grade]<br>\n<code>SELECT * FROM SC WHERE Grade&gt;80</code><br>\n从数据表SC中查询选修了课程“C0201”并且成绩高于80分的学生的学号与成绩[SNo,CNo,Grade]<br>\n<code>SELECT SNo,Grade FROM SC WHERE CNo=\'C0201\' AND Grade&gt;80</code><br>\n从数据表T中查询工资在5000元到7000元之间的教师的教师号、姓名与职称<code>BETWEEN AND</code>[TNo,TN,Prof,Sal]<br>\n<code>SELECT TNo,TN,Prof FROM T WHERE Sal BETWEEN 5000 AND 7000</code><br>\n从数据表SC中查询选修了课程“C0204”或“D0101”的学生的选课信息[CNo]<br>\n<code>SELECT * FROM SC WHERE CNo IN(\'C0204\',\'D0101\')</code><br>\n从数据表T中查询所有李姓教师的教师号与姓名[TNo,TN]<br>\n<code>SELECT TNo,TN FROM T WHERE TN LIKE \'李%\'</code><br>\n从数据表 SC中查询考试成绩有效的学生选课信息[Grade]<br>\n<code>SELECT * FROM SC WHERE Grade IS NOT NULL</code><br></p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">聚集函数</p>\n<p>从数据表T中查询计算机系教师的人数，以及这些教师工资的总和与平均值[Sal,Dept]<br>\n<code>SELECT COUNT(*) AS Num,SUM(Sal) AS SumSal,AVG(Sal) AS AvgSal FROM T WHERE Dept=\'计算机\'</code><br>\n数据表SC中查询选修了课程“C0201”且有成绩的学生人数以及成绩中的最高分和最低分[Grade,CNo]<br>\n<code>SELECT COUNT(Grade) AS Num,MAX(Grade) AS MaxGrade,MIN(Grade) AS MinGrade FROM SC WHERE CNo=\'C0201\'</code><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">分组查询</p>\n<p>从数据表SC中查询选修每门课程的学生人数[CNo,SNo]<br>\n<code>SELECT CNo,COUNT(SNo) AS Num FROM SC GROUP BY CNo</code><br>\n从数据表SC中查询选修两门及以上课程的学生学号及选课门数[SNo]<br>\n<code>SELECT SNo,COUNT(*) AS Num FROM SC GROUP BY SNo HAVING (COUNT(*)&gt;=2)</code><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">排序查询</p>\n<p>从数据表T中查询每个教师的教师号、姓名及年薪，并按照年薪值降序排列[TNo,TN,Sal]<br>\n<code>SELECT TNo,TN,Sal*12 AS Income FROM T ORDER BY Income DESC</code><br>\n从数据表SC中查询选修了课程“C0201”或“D0201”的学生选课信息，查询结果按照学号升序排列，学号相同再按照成绩降序排列[CNo,SNo,Grade]<br>\n<code>SELECT * FROM SC WHERE CNo IN (\'C0201\',\'D0101\')  ORDER BY SNo,Grade DESC</code><br></p>'}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">连接查询</p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">连接查询的结构</p>\n<p>从数据表T,TC中查询教师“赵乾”所讲授的课程,列出其教师号和所授的课程编号[TNo,CNo,TN]<br>\n<code>SELECT T.TNo,CNo FROM T,TC WHERE T.TNo=TC.TNo AND TN=\'赵乾\'</code><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': "<p>内连接查询<code>INNER JOIN</code><br>\n从数据表T,TC中查询教师“赵乾”所讲授的课程,列出其教师号和所授的课程编号[TNo,CNo,TN]<br>\n<code>SELECT T.TNo,CNo FROM T INNER JOIN TC ON T.TNo=TC.TNo WHERE TN='赵乾'</code><br>\n从数据表C,SC中查询每门课程的课程编号、课程名称及选课人数[CNo,CN,SNo]<br>\n<code>SELECT C.CNo,CN,COUNT(SC.SNo) AS Num FROM C,SC WHERE SC.CNo=C.CNo GROUP BY C.CNo,CN</code><br></p>"}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p>外连接查询<code>LEFT JOIN</code>-<code>RIGHT JOIN</code>-<code>FULL JOIN</code><br>\n从数据表C中查询所有选课信息，并列出课程名称[SNo,CNo,CN,Grade]<br>\n<code>SELECT SNo,C.CNo,CN,Grade FROM C RIGHT JOIN SC ON C.CNo=SC.CNo</code><br>\n从数据表C中查询所有课程的课程名称，并分别列出它们的选课信息[CN,CNo,SNo,Grade]<br>\n<code>SELECT CN,C.CNo,SNo,Grade FROM C LEFT JOIN SC ON C.CNo=SC.CNo</code><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p>交叉查询<code>CROSS JOIN</code><br>\n对学生表S与教师表T进行交叉查询<br>\n<code>SELECT * FROM S CROSS JOIN T</code><br></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">自连接查询</p>\n<p>从数据表S中查询所有年龄比“陈月”大的学生姓名、年龄[SN,Age]<br>\n<code>SELECT a.SN,a.Age FROM S AS a,S AS b WHERE a.Age&gt;b.Age AND b.SN=\'陈月\'</code><br></p>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">嵌套查询</p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">普通子查询</p>\n<p>从数据表T中查询与教师“赵乾”同系的教师名称与职称[TN,Prof,Dept]<br>\n<code>SELECT TN,Prof FROM T WHERE Dept=(SELECT Dept FROM T WHERE TN=\'赵乾\')</code><br>\n从数据表S,SC中查询选修了课程“C0201”的学生姓名[SN,SNo,CNo]<br>\n<code>SELECT SN FROM S WHERE SNo=ANY(SELECT SNo FROM SC WHERE CNo=\'C0201\')</code><br>\n<code>SELECT SN FROM S WHERE SNo IN(SELECT SNo FROM SC WHERE CNo=\'C0201\')</code><br>\n<code>SELECT SN FROM S,SC WHERE S.SNo=SC.SNo AND SC.CNo=\'C0201\'</code><br>\n从数据表T中查询其他系中比自动化系所有教师工资都高的教师的姓名与工资[TN,Sal,Dept]<br>\n<code>SELECT TN,Sal FROM T WHERE Dept&lt;&gt;\'自动化\' AND Sal&gt;ALL(SELECT Sal FROM T WHERE Dept=\'自动化\')</code><br>\n<code>SELECT TN FROM T WHERE Dept&lt;&gt;\'自动化\' AND  Sal&gt;(SELECT MAX(Sal) FROM T WHERE Dept=\'自动化\')</code><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">相关子查询</p>\n<p>从数据表S,SC中查询没有选修课程“C0201”的学生姓名[SN,CNo,SNo]&lt;&gt;ALL相当于NOT IN<br>\n<code>SELECT DISTINCT SN FROM S WHERE \'C0201\'&lt;&gt;ALL(SELECT CNo FROM SC WHERE SNo=S.SNo)</code><br>\n<code>SELECT DISTINCT SN FROM S WHERE NOT EXISTS(SELECT * FROM SC WHERE SNo=S.SNo AND CNo=\'C0201\')</code><br></p>'}]}]})</script></body>
</html>
