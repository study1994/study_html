<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>数据处理</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.hidden-code {
  display: none !important;
}
</style>
<link rel="stylesheet" href="https://study1994.github.io/study_html/npm/mycss/style.css">
</head>
<body>
    <svg id="mindmap"></svg>
    <script src="https://study1994.github.io/study_html/npm/myjs/d3@6.7.0.js"></script>
    <script src="https://study1994.github.io/study_html/npm/myjs/markmap-view@0.13.5.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full"></script>
    <script>
        (r => {
            setTimeout(r);
        })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{'type': 'root', 'depth': 0, 'content': '', 'children': [{'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">nyc(projects/configs/vma_icurb.py)</p><span class=\'hidden-code\' data-code=\'map_classes = [&amp;#39;curb&amp;#39;]\nfixed_ptsnum_per_gt_line = 50 now only support fixed_pts > 0\nfixed_ptsnum_per_pred_line = 50\neval_use_same_gt_sample_num_flag=True\nnum_map_classes = len(map_classes)\n\'> </span>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/icurb_dataset.py</p><span class=\'hidden-code\' data-code=\'@DATASETS.register_module()\nclass iCurb_Dataset(Dataset):\n    CLASSES = (&amp;#39;curb&amp;#39;)\n    def __init__(self, split_file,seq_dir, image_dir, mask_dir, points_nums, map_classes=None, pipeline=None,mode=&amp;#39;valid&amp;#39;, test_mode=False):\n        assert mode in {&amp;#39;train&amp;#39;, &amp;#39;valid&amp;#39;, &amp;#39;test&amp;#39;}\n        self.MAPCLASSES = self.get_map_classes(map_classes)                            # [&amp;#39;curb&amp;#39;]\n        annotation_dict = self.`load_datadir`(split_file, seq_dir, image_dir, mode)\n        self.annotation_dict = annotation_dict\n        self.seq_len = len(annotation_dict)                                            # 20236\n        self.points_nums = points_nums                                                 # 50\n        self.padding_value = -10000                                                    \n        self.mask_dir = mask_dir                        # &amp;#39;./data/nyc/labels/binary_map&amp;#39;     \n        self.total_acc = 0\n        self.total_recall = 0\n        self.total_r_f = 0\n        self.NUM_MAPCLASSES = len(self.MAPCLASSES)      # 1\n        if pipeline is not None:\n            self.pipeline = Compose(pipeline)           # {&amp;#39;type&amp;#39;: &amp;#39;LoadImageFromFiles&amp;#39;, &amp;#39;to_float32&amp;#39;: True}   {&amp;#39;type&amp;#39;: &amp;#39;Collect&amp;#39;, &amp;#39;keys&amp;#39;: [&amp;#39;img&amp;#39;], &amp;#39;meta_keys&amp;#39;: \n        if not test_mode:\n            self._set_group_flag()                      # self.flag,长度为(20236,)的全0 numpy\n    def load_datadir(self, split_file, seq_path, image_path, mode):\n        with open(split_file,&amp;#39;r&amp;#39;) as jf:                             # &amp;#39;./data/nyc/data_split.json&amp;#39;\n            json_list = json.load(jf)                                # {&amp;#39;train&amp;#39;:[&amp;#39;917137_12&amp;#39;,...], &amp;#39;valid&amp;#39;:[&amp;#39;042247_00&amp;#39;,...], &amp;#39;test&amp;#39;:, &amp;#39;pretrain&amp;#39;:}\n        train_list = json_list[&amp;#39;train&amp;#39;] + json_list[&amp;#39;pretrain&amp;#39;]      # 20236\n        test_list = json_list[&amp;#39;valid&amp;#39;]                               # 1770\n        val_list = json_list[&amp;#39;valid&amp;#39;]\n        if mode == &amp;#39;valid&amp;#39;:\n            json_list = [x+&amp;#39;.json&amp;#39; for x in val_list]\n        elif mode == &amp;#39;test&amp;#39;:\n            json_list = [x+&amp;#39;.json&amp;#39; for x in test_list]\n        else:\n            json_list = [x+&amp;#39;.json&amp;#39; for x in train_list]\n        annotation_dict={}\n        for jsonf in json_list[:20]:\n            with open(osp.join(seq_path, jsonf), &amp;#39;r&amp;#39;) as f:\n                seq_list = json.load(f)                               # 见readme.md  \n            instances= []\n            for area in seq_list: \n                instances.append(area[&amp;#39;seq&amp;#39;])                         # [[[512,0],...,[999,597]],[[543,0],...,[999,540]]]\n            annotation_dict.update({jsonf:{&amp;#39;image_path&amp;#39;:osp.join(image_path, jsonf[:-4]+&amp;#39;tiff&amp;#39;),&amp;#39;instances&amp;#39;:instances}})      # 轨迹路线\n        return annotation_dict   \n    def __getitem__(self, idx):\n        example = self.`load_data`(**list(self.annotation_dict.values())[idx])      # {&amp;#39;image_path&amp;#39;: &amp;#39;./data/nyc/cropped_t...37_12.tiff&amp;#39;, &amp;#39;instances&amp;#39;: [[...], [...]]}\n        return example                                                            # <projects.mmdet3d_plugin.datasets.icurb_dataset.InstanceLines\n\'> </span>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/icurb_dataset.py</p><span class=\'hidden-code\' data-code=\'@DATASETS.register_module()\nclass iCurb_Dataset(Dataset):\n    def load_data(self, image_path, instances):\n        # load image    LoadImageFromFiles:  projects/mmdet3d_plugin/datasets/pipelines/load.py  Collect:                                             \n        example = self.`pipeline`({&amp;#39;img_filename&amp;#39;:image_path})          # &amp;#39;./data/nyc/cropped_tiff/917137_12.tiff&amp;#39;  --->example-{&amp;#39;img_metas&amp;#39;:,&amp;#39;img&amp;#39;:(4, 1000, 1000)}\n        # load vectormap\n        example = self.`vectormap_pipeline`(example, instances)         # iCurb_Dataset.vectormap_pipeline\n        return example\n\'> </span>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/pipelines/load.py</p><span class=\'hidden-code\' data-code=\'class LoadImageFromFiles(object):\n    def __call__(self, results):\n        filename = results[&amp;#39;img_filename&amp;#39;]            # &amp;#39;./data/nyc/cropped_tiff/917137_12.tiff&amp;#39;\n        img = Image.open(filename)                    # (1000, 1000)\n        img = F.to_tensor(img).numpy()                # (4, 1000, 1000)\n        img_shape = img.shape\n        h = img_shape[1]\n        w = img_shape[2]\n        size = (h, w)\n        if self.to_float32:\n            img = img.astype(np.float32)\n        results[&amp;#39;filename&amp;#39;] = filename\n        results[&amp;#39;img&amp;#39;] = img\n        results[&amp;#39;img_shape&amp;#39;] = size\n        results[&amp;#39;ori_shape&amp;#39;] = size\n        results[&amp;#39;pad_shape&amp;#39;] = size\n        results[&amp;#39;scale_factor&amp;#39;] = 1.0\n        num_channels = 1 if len(img.shape) < 3 else img.shape[0]\n        results[&amp;#39;img_norm_cfg&amp;#39;] = dict(mean=np.zeros(num_channels, dtype=np.float32),std=np.ones(num_channels, dtype=np.float32),to_rgb=False)\n        return results\n\'> </span>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/icurb_dataset.py</p><span class=\'hidden-code\' data-code=\'class iCurb_Dataset(Dataset):\n    def vectormap_pipeline(self, example, instances):\n        vectormap = `VectorizedLocalMap`(patch_size=example[&amp;#39;img_metas&amp;#39;].data[&amp;#39;img_shape&amp;#39;],map_classes=self.MAPCLASSES,fixed_ptsnum_per_line=self.points_nums,padding_value=self.padding_value,)\n        anns_results = vectormap.`gen_vectorized_samples`(instances=instances)  # anns_results, type: dict\n                                                                                # &amp;#39;gt_vecs_pts_loc&amp;#39;: list[num_vecs], vec with num_points*2 coordinates\n                                                                                # &amp;#39;gt_vecs_pts_num&amp;#39;: list[num_vecs], vec with num_points\n                                                                                # &amp;#39;gt_vecs_label&amp;#39;: list[num_vecs], vec with cls index\n        gt_vecs_label = to_tensor(anns_results[&amp;#39;gt_vecs_label&amp;#39;])                # tensor([0, 0])\n        if isinstance(anns_results[&amp;#39;gt_vecs_pts_loc&amp;#39;], InstanceLines):          # True\n            gt_vecs_pts_loc = anns_results[&amp;#39;gt_vecs_pts_loc&amp;#39;]                   # `<`projects.mmdet3d_plugin.datasets.icurb_dataset.InstanceLines object at 0x7fe49b278130`>`\n        else:\n            ......\n        example[&amp;#39;gt_labels&amp;#39;] = DC(gt_vecs_label, cpu_only=False)\n        example[&amp;#39;gt_bboxes&amp;#39;] = DC(gt_vecs_pts_loc, cpu_only=True)\n        return example\n\'> </span>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/icurb_dataset.py</p><span class=\'hidden-code\' data-code=\'class VectorizedLocalMap(object):\n    def __init__(self,patch_size,map_classes=[&amp;#39;divider&amp;#39;,&amp;#39;ped_crossing&amp;#39;,&amp;#39;boundary&amp;#39;],sample_dist=1,num_samples=250,padding=False,fixed_ptsnum_per_line=-1,padding_value=-10000):\n        super().__init__()\n        self.vec_classes = map_classes                # [&amp;#39;curb&amp;#39;]\n        self.sample_dist = sample_dist                # 1\n        self.num_samples = num_samples                # 250\n        self.padding = padding                        # False\n        self.fixed_num = fixed_ptsnum_per_line        # 50\n        self.padding_value = padding_value            # -10000\n        self.patch_size = patch_size                  # (1000, 1000)\n    def gen_vectorized_samples(self, instances):      # [[[[512, 0]],...,[999, 597]],[[[543, 0],...,[999, 540]]]]\n        vectors = []\n        for instance in instances:                    # [[[512, 0]],...,[999, 597]]\n            vectors.append((LineString(np.array(instance)), 0)) \n        gt_labels = []\n        gt_instance = []\n        for instance, instance_type in vectors:\n            if instance_type != -1:\n                gt_instance.append(instance)\n                gt_labels.append(instance_type)\n        gt_instance = InstanceLines(gt_instance, gt_labels, self.sample_dist, self.num_samples, self.padding, self.fixed_num,self.padding_value, patch_size=self.patch_size)\n        # ----------------自己加的测试代码-----------------------\n        _ = gt_instance.start_end_points\n        _ = gt_instance.bbox\n        # _ = gt_instance.origin_points\n        _ = gt_instance.shift_fixed_num_sampled_points_v2\n        # ------------------------------------------------------\n        anns_results = dict(\n            gt_vecs_pts_loc=gt_instance,\n            gt_vecs_label=gt_labels,\n        )\n        return anns_results\n\'> </span>'}]}]}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">sd_data_line(projects/configs/vma_res152_e80_line.py)</p><span class=\'hidden-code\' data-code=\'lane_direction = [&amp;#39;unidirectional&amp;#39;, &amp;#39;bidirectional&amp;#39;, &amp;#39;unknown&amp;#39;]                             “单向”、“双向”、“未知”\nlane_type = [&amp;#39;solid&amp;#39;, &amp;#39;dotted&amp;#39;, &amp;#39;solid_fishbone&amp;#39;, &amp;#39;ldotted_fishbone&amp;#39;, &amp;#39;unknown&amp;#39;, &amp;#39;no&amp;#39;]      “实心”、“虚线”\nlane_properties = [&amp;#39;general&amp;#39;, &amp;#39;stay&amp;#39;, &amp;#39;tide&amp;#39;, &amp;#39;bus&amp;#39;, &amp;#39;three_color&amp;#39;, &amp;#39;unknown&amp;#39;]\nlane_flag = [&amp;#39;single&amp;#39;, &amp;#39;double&amp;#39;, &amp;#39;triple&amp;#39;, &amp;#39;unknown&amp;#39;]                                       “单”、“双”、“三”、“未知”\nlane_width = [&amp;#39;normal&amp;#39;, &amp;#39;wide&amp;#39;, &amp;#39;unknown&amp;#39;]\ncurb_type = [&amp;#39;groundside&amp;#39;, &amp;#39;roadside&amp;#39;, &amp;#39;cone&amp;#39;, &amp;#39;water_horse&amp;#39;, &amp;#39;guardrail&amp;#39;,&amp;#39;unknown&amp;#39;]        “圆形边”、“路边”、“锥形”、“水_霍斯”、“护栏”、“未知”\nattrs_dict = {&amp;#39;lane_direction&amp;#39;:lane_direction, &amp;#39;lane_type&amp;#39;:lane_type, &amp;#39;lane_properties&amp;#39;:lane_properties, &amp;#39;lane_flag&amp;#39;:lane_flag,&amp;#39;lane_width&amp;#39;:lane_width, &amp;#39;curb_type&amp;#39;:curb_type}\nfixed_ptsnum_per_gt_line = 50                              now only support fixed_pts > 0\nfixed_ptsnum_per_pred_line = 50\neval_use_same_gt_sample_num_flag=True\nnum_map_classes = len(map_classes)\n\'> </span>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'@DATASETS.register_module()\nclass SD_Driving_Line_Dataset(Dataset):\n    def __init__(......):\n        assert mode in {&amp;#39;train&amp;#39;, &amp;#39;test&amp;#39;, &amp;#39;valid&amp;#39;}\n        self.MAPCLASSES = self.CLASSES = self.get_map_classes(map_classes)  # [&amp;#39;lane&amp;#39;, &amp;#39;curb&amp;#39;, &amp;#39;stopline&amp;#39;]-->[&amp;#39;lane&amp;#39;, &amp;#39;curb&amp;#39;, &amp;#39;stopline&amp;#39;]\n        self.attrs_dict = attrs_dict               # {&amp;#39;lane_direction&amp;#39;: [&amp;#39;unidirectional&amp;#39;, &amp;#39;bidirectional&amp;#39;, &amp;#39;unknown&amp;#39;], &amp;#39;lane_type&amp;#39;: [...],...}\n        self.data_root = data_root                 # &amp;#39;data/sd_data/line/cropped_data&amp;#39;       这里面图片被切成了1000*1000大小的图片，\n        self.sub_dir = sub_dir                     # &amp;#39;trajectory_cropped_images&amp;#39;\n        annotation_dict = self.`load_datadir`(annotation_file, mode)\n        self.annotation_dict = annotation_dict\n        self.mask_dir = mask_dir                   # &amp;#39;data/sd_data/line/cropped_data/mask_map&amp;#39;\n        self.seq_len = len(annotation_dict)        # 35\n        self.points_nums = points_nums             # 50\n        self.padding_value = -10000   \n        self.NUM_MAPCLASSES = len(self.MAPCLASSES)  # 3\n        self.eval_use_same_gt_sample_num_flag=eval_use_same_gt_sample_num_flag   # True\n        self.test_mode = test_mode\n        if pipeline is not None:\n            self.pipeline = Compose(pipeline)   # &amp;#39;LoadImageFromFiles&amp;#39;,&amp;#39;NormalizeImage&amp;#39;,&amp;#39;Collect&amp;#39;\n        if not test_mode:\n            self.`_set_group_flag`()              # self.flag = np.zeros(len(self), dtype=np.uint8)\n\'> </span>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'class SD_Driving_Line_Dataset(Dataset):\n    def load_datadir(self, annotation_file, mode):\n        annotation_file = os.path.join(self.data_root, annotation_file)   # &amp;#39;data/sd_data/line/cropped_data/sd_data_line_dict.json&amp;#39;\n        with open(annotation_file,&amp;#39;r&amp;#39;) as jf:\n            json_dict = json.load(jf)         # {&amp;#39;train&amp;#39;:[{&amp;#39;image_name&amp;#39;:&amp;#39;sample_1_0.jpg&amp;#39;, &amp;#39;left_top&amp;#39;: [2415, 0],&amp;#39;instances&amp;#39; =:[{&amp;#39;class&amp;#39;:&amp;#39;lane&amp;#39;,&amp;#39;data&amp;#39;:[[],...,],&amp;#39;attr&amp;#39;:{}}]}\n        if mode == &amp;#39;valid&amp;#39;:\n            json_list = json_dict[&amp;#39;valid&amp;#39;]\n        elif mode == &amp;#39;test&amp;#39;:\n            json_list = json_dict[&amp;#39;valid&amp;#39;]\n        else:\n            json_list = json_dict[&amp;#39;train&amp;#39;]\n        annotation_dict={}\n        for img_ann in json_list:\n            annotation_dict.update({img_ann[&amp;#39;image_name&amp;#39;]:{&amp;#39;image_path&amp;#39;:osp.join(self.data_root, self.sub_dir, img_ann[&amp;#39;image_name&amp;#39;]),&amp;#39;instances&amp;#39;:img_ann[&amp;#39;instances&amp;#39;]}})\n        return annotation_dict    # {&amp;#39;sample_1_0.jpg&amp;#39;:{&amp;#39;iamge_path&amp;#39;:&amp;#39;&amp;#39;,&amp;#39;instances&amp;#39;:[{},{}]}}\n\'> </span>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'class SD_Driving_Line_Dataset(Dataset):\n    def __getitem__(self, idx):\n        if self.test_mode:\n            return self.prepare_test_data(idx)\n        while True:\n            data = self.`prepare_train_data`(idx)\n            if data is None:\n                idx = self._rand_another(idx)\n                continue\n            return data\n\'> </span>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'class SD_Driving_Line_Dataset(Dataset):\n    def prepare_train_data(self,idx):\n        return self.`load_train_data`(**list(self.annotation_dict.values())[idx])\n\'> </span>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'class SD_Driving_Line_Dataset(Dataset):\n    def load_train_data(self, image_path, instances):\n        example = self.`pipeline`({&amp;#39;img_filename&amp;#39;:image_path})  # load image    &amp;#39;data/....../sample_1_0.jpg&amp;#39;\n        example = self.`vectormap_pipeline`(example, instances) # load vectormap [{&amp;#39;class&amp;#39;: &amp;#39;lane&amp;#39;, &amp;#39;data&amp;#39;:[],&amp;#39;attrs&amp;#39;:{}},{},......]\n        return example\n\'> </span>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/pipelines/load.py</p><span class=\'hidden-code\' data-code=\'class LoadImageFromFiles(object):\n\'> </span>'}, {'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/pipelines/load.py</p><span class=\'hidden-code\' data-code=\'class NormalizeImage(object):\n    def __call__(self, results):\n        img = results[&amp;#39;img&amp;#39;].transpose(1, 2, 0)     # C,H,W -> H,W,C\n        results[&amp;#39;img&amp;#39;] = mmcv.imnormalize(img, self.mean, self.std, self.to_rgb).transpose(2, 0, 1)\n        results[&amp;#39;img_norm_cfg&amp;#39;] = dict(\n            mean=self.mean, std=self.std, to_rgb=self.to_rgb)\n        return results\n\'> </span>'}, {'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">projects/mmdet3d_plugin/datasets/sd_driving_line_dataset.py</p><span class=\'hidden-code\' data-code=\'class SD_Driving_Line_Dataset(Dataset):\n    def vectormap_pipeline(self, example, instances):\n        vectormap = `VectorizedLocalMap`(patch_size=example[&amp;#39;img_metas&amp;#39;].data[&amp;#39;img_shape&amp;#39;], \n                                        map_classes=self.MAPCLASSES, \n                                        fixed_ptsnum_per_line=self.points_nums,\n                                        padding_value=self.padding_value,)\n        anns_results = vectormap.`gen_vectorized_samples`(instances, self.attrs_dict)\n        \n        &amp;#39;&amp;#39;&amp;#39;\n        anns_results, type: dict\n            &amp;#39;gt_vecs_pts_loc&amp;#39;: list[num_vecs], vec with num_points*2 coordinates\n            &amp;#39;gt_vecs_pts_num&amp;#39;: list[num_vecs], vec with num_points\n            &amp;#39;gt_vecs_label&amp;#39;: list[num_vecs], vec with cls index\n        &amp;#39;&amp;#39;&amp;#39;\n        gt_vecs_label = to_tensor(anns_results[&amp;#39;gt_vecs_label&amp;#39;])\n        gt_vecs_attr = to_tensor(anns_results[&amp;#39;gt_vecs_attr&amp;#39;]).permute(1, 0)\n        if isinstance(anns_results[&amp;#39;gt_vecs_pts_loc&amp;#39;], InstanceLines):\n            gt_vecs_pts_loc = anns_results[&amp;#39;gt_vecs_pts_loc&amp;#39;]\n        else:\n            gt_vecs_pts_loc = to_tensor(anns_results[&amp;#39;gt_vecs_pts_loc&amp;#39;])\n            try:\n                gt_vecs_pts_loc = gt_vecs_pts_loc.flatten(1).to(dtype=torch.float32)\n            except:\n                # empty tensor, will be passed in train,  but we preserve it for test\n                gt_vecs_pts_loc = gt_vecs_pts_loc\n        example[&amp;#39;gt_labels&amp;#39;] = DC(gt_vecs_label, cpu_only=False)\n        example[&amp;#39;gt_bboxes&amp;#39;] = DC(gt_vecs_pts_loc, cpu_only=True)\n        example[&amp;#39;gt_attrs&amp;#39;] = DC(gt_vecs_attr, cpu_only=False)\n        return example\n\'> </span>'}]}]}]}]}]})</script><script src='https://study1994.github.io/study_html/npm/myjs/tooltip.js'></script>
</body>
</html>
