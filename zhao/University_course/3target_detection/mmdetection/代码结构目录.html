<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>代码结构目录</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 150vh;
}
</style>
<link rel="stylesheet" href="https://study1994.github.io/study_html/npm/prism.css"><link rel="stylesheet" href="https://study1994.github.io/study_html/npm/markmap-toolbar@0.13.5/dist/style.css">
</head>
<body>
    <svg id="mindmap"></svg>
    <script src="https://study1994.github.io/study_html/npm/d3@6.7.0"></script>
    <script src="https://study1994.github.io/study_html/npm/markmap-view@0.13.5"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full"></script>
    <script>
        (r => {
            setTimeout(r);
        })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{'type': 'root', 'depth': 0, 'content': '', 'children': [{'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/configs">configs网络组件结构等配置信息</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/configs/_base_">_base_</a></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">models</p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/configs/_base_/models/faster_rcnn_r50_fpn.py">faster_rcnn_r50_fpn.py</a></p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/configs/_base_/models/mask_rcnn_r50_fpn.py">mask_rcnn_r50_fpn.py</a></p>'}]}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/demo">demo</a></p>'}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet">mmdet</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core">core</a></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/anchor">anchor处理</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/anchor/__init__.py"><strong>init</strong>.py</a><br>\n在原图上构造了完整的bbox空间,根据人为标定bbox，选出有效的拟合集合从而使得优化变得更有效<br></p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/anchor/anchor_generator.py">anchor_generator.py</a><br>\n<a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF0pCdra2LKQtW2EK34O2L5wiA">AnchorGenerator</a><br></p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/bbox">bbox处理</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/bbox/assigners">assigners</a>给特征图上anchor赋予监督信息</p>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/assigners/max_iou_assigner.py">max_iou_assigner.py</a></p>'}]}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/bbox/coder">coder</a></p>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/coder/base_bbox_coder.py">base_bbox_coder.py</a>编解码公式参照：<a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF0FocBM0Tvh7G2fHxsS3DezYL">decode与encode操作</a></p>'}, {'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/coder/delta_xywh_bbox_coder.py">delta_xywh_bbox_coder.py</a></p>'}]}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/bbox/sampler">sampler</a></p>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/samplers/base_sampler.py">base_sampler.py</a>;<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/samplers/combined_sampler.py">combined_sampler.py</a>;<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/bbox/samplers/pseudo_sampler.py">pseudo_sampler.py</a><code>raise NotImplementedError</code>避免不能实例化</p>'}]}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/evaluation">evaluation</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/evaluation/eval_hooks.py">eval_hooks.py</a></p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/evaluation/mean_ap.py">mean_ap.py</a><br>\naverage_precision<br>\ntpfp_default<br>\neval_map:评估函数需要被注册到对应的钩子中去,于是需要在Hook中实现after_train_epoch:<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/evaluation/eval_hooks.py">mmdet/core/evaluation/eval_hooks.py</a><br></p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/core/utils">utils</a><br>\n<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/utils/misc.py">misc.py</a>:multi_apply<br></p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/datasets">datasets</a></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/datasets/pipelines">pipelines</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/pipelines/transforms.py">transforms.py</a><br>\nResize<br></p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/datasets/samplers">samplers</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/samplers/group_sampler.py">group_sampler.py</a>:将长宽比大于1和小于1的图片分成两组,将同一组的图片组成batch返回<br>\nGroupSampler<br></p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/__init__.py"><strong>init</strong>.py</a></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/custom.py">custom.py</a><br>\n继承<code>from torch.utils.data import Dataset</code>将多个数据集整合到一起(把不同序列的长度相加，getitem函数对应index替换一下,提高数据丰富度<br>\n<strong>getitem</strong>(self,idx)<br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/dataset_wrappers.py">dataset_wrappers.py</a><br>\n单个数据类(序列)的多次重复,可解决数据太少使得loading时间长的问题<br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/builder.py">builder.py</a><br>\n里面包括<code>ConcatDataset</code>,<code>RepeatDataset</code>和<code>从注册器中提取</code>等多种方式构建数据<br>\n<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/custom.py">mmdet/datasets/custom.py</a><br>\n<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/dataset_wrappers.py">mmdet/datasets/dataset_wrappers.py</a><br></p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/mmcv">mmcv</a></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/mmcv/utils">utils</a></p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/mmcv/utils/registry.py">registry.py</a><br>\nbuild_from_cfg<br>\nRegistry<br></p>'}]}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models">models</a></p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/models/builder.py">builder.py</a><br>\n创建一个名为<code>DETECTORS</code>的注册表Registry;有属性<code>name=\'detector\'</code>和<code>_module_dict</code>(字典存储各个对象名和对应对象)<br>\n读取py配置文件，根据key创建module，其value为其module名，其他数据，作为形参，实例化这些类。并保存到属性_module_dict中。<br></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/backbones">backbones</a>特征提取骨架网络,ResNet,ResneXt,ssd_vgg,hrnet等</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/dense_heads">dense_heads</a>处理特征图上的密集框部分(怎么给anchor打标签),主要分AnchorHead/AnchorFreeHead两大类,分别有RPNHead,SSDHead,RetinaHead和FCOSHead等</p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">怎么给anchor打标签:_get_targets_single/get_targets</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">头部网络怎么设计:_init_layers</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">loss怎么计算:loss_single,get_anchors,loss</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">如何解析预测结果:_get_bboxes_single,get_bboxes</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p>get_target,loss在不同尺度上计算是类似的<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/core/utils/misc.py">mmdet/core/utils/misc.py</a>将同一操作作用于不同尺度上,得到所有结果</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/models/dense_heads/anchor_head.py">anchor_head.py</a><br>\n_get_targets_single<br></p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/detectors">detectors</a></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/losses">losses</a></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/necks">necks</a>连接骨架和头部.多层级特征融合,FPN,BFP,PAFPN等</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/plugins">plugins</a></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/roi_heads">roi_heads</a>bbox或mask的roi_extractor+head</p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/roi_extractors">roi_extractors</a>对特征图上的预选框做pool得到大小统一的roi</p>'}]}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/seg_heads">seg_heads</a></p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/mmdet/models/utils">utils</a></p>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/tests">tests</a></p>'}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/tree/master/tools">tools</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://gitee.com/zhao-study/cvmm/blob/master/tools/train.py">train.py</a><br>\n<code>from mmdet.datasets import build_dataset</code>时就执行:<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/datasets/__init__.py">mmdet/datasets/<strong>init</strong>.py</a>注册<code>DATASETS/PIPELINES</code>然后经过<code>@DATASETS.register_module()</code>把相应类注册进去<br>\n<code>from mmdet.models import build_detector</code>同上<br>\nmodel=build_detector():<a href="https://gitee.com/zhao-study/cvmm/blob/master/mmdet/models/builder.py">mmdet/models/builder.py</a><br></p>'}]}]})</script></body>
</html>
