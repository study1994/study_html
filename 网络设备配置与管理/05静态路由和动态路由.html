<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>05静态路由和动态路由</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<link rel="stylesheet" href="https://study1994.github.io/study_html/npm/prism.css"><link rel="stylesheet" href="https://study1994.github.io/study_html/npm/markmap-toolbar@0.13.5/dist/style.css">
</head>
<body>
    <svg id="mindmap"></svg>
    <script src="https://study1994.github.io/study_html/npm/d3@6.7.0"></script>
    <script src="https://study1994.github.io/study_html/npm/markmap-view@0.13.5"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML-full"></script>
    <script>
        (r => {
            setTimeout(r);
        })(() => {
  const {
    markmap,
    mm
  } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute('style', 'position:absolute;bottom:20px;right:20px');
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root, jsonOptions) => {
        const markmap = getMarkmap();
        window.mm = markmap.Markmap.create('svg#mindmap', (getOptions || markmap.deriveOptions)(jsonOptions), root);
      })(() => window.markmap,null,{'type': 'root', 'depth': 0, 'content': '', 'children': [{'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3m0MUg1zcAyE21Btz928xb3a">1路由器基础知识</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">是工作在<font color=Blue>网络层</font>上连接多个相同或不同类型网络的<font color=Blue>网络互联设备</font>(最佳路径传送数据)</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEPsMq6N9LOjFv*i2eRyy90hqlv1xZu2Wot6HdMUWvuK.br0QnwCFV5pHiTcG3PIYxi0*aJ28WL3tAganOiHmgJQ!/b&amp;bo=OgWnAQAAAAABF6k!&amp;rf=viewer_4">路由器图片</a></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由器的外部接口</p>\n<p>支持的接口类型<br>\n接口类型由<font color=Blue>标识符+至少一位数字</font>组成<br>\n由<font color=Blue>控制端口Console</font>与<font color=Blue>终端管理设备</font>,对路由器进行初始配置<br>\n模块化路由器<a href="http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEEKCdPsvMx.Urjp*FFAlNF3AOB4zLSUERIvqVPRupalLyIV0JA66H1I9qCfdCSI45oDvV*qSDyPvoepkACZpPlE!/b&amp;bo=cgMNAQAAAAABF00!&amp;rf=viewer_4">路由器的外部接口图片</a><br>\n功能接口类型及部分扩展功能可以<font color=Blue>根据用户的实际需求</font>来配置<br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由器的工作原理</p>路由选择:确定数据传输到目标地址的最佳路径<br>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由算法</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由表</p>保存着各种传输路径的信息<br>\n每项路由条目包含<br>\n(1)<font color=Blue>网络ID</font>：它包含已知存在的网络，一般通过静态配置或路由选择协议获取<br>\n(2)<font color=Blue>转发地址</font>：<br>\n如果目的IP地址所在的网络和当前路由器不直接连接时，路由表条目中会出现下一跳路由器的IP地址<br>\n对于主机或路由器直接连接的网络，转发地址字段可能是连接到网络的接口地址<br>\n(3)<font color=Blue>度量值</font>：根据路由选择协议指定的准则给每条路径分配的值,度量值最小的路由为首选路由<br>\n(4)<font color=Blue>接口</font>：是数据报转发所使用的路由器接口信息，一般为端口号或其他逻辑标识符<br>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由转发流程:</p>当路由器从端口接收到<font color=Blue>数据帧</font>时，首先检查数据目的地址字段中的<font color=Blue>数据链路标识</font><br>\n(1)如果标识符是路由器端口标识符或广播标识符，则从数据帧中去掉帧封装，将剥离出来的报文传递给网络层。<br>\n然后，路由器检查数据报文的<font color=Blue>目的地IP地址</font>，<br>\n(a)如果目的地IP地址是<font color=Blue>路由器端口IP地址或者所有主机的广播地址</font>，则继续检查报文协议字段，根据其代表的协议向相应的内部进程发送数据。<br>\n(b)如果数据报文的目的地IP地址<font color=Blue>不是路由器端口IP地址或者所有主机的广播地址</font>，即报文需要继续路由到下一跳路由器，则查看本地路由表<br>\n查找是否存在能与目的IP地址完全相同的条目，即网络号和主机号都要相同（网络号和主机号相关知识请参考下一届内容）<br>\n(ba)如果<font color=Blue>查找成功</font>，则把报文发送到目的地IP地址。<br>\n(bb)若上述<font color=Blue>查找失败</font>，则重新查看路由表，查找能与目的地IP地址中的网络号相同的条目。<br>\n(bba)如果<font color=Blue>查找成功<</font>，把报文发送到指定的下一跳IP地址或直接连接的网络接口。如果多于一项条目与之匹配，则继续匹配子网位，直到实现最佳匹配<br>\n(bbb)若上述<font color=Blue>查找失败</font>，则重新查看路由表，查找是否存在默认路由。查找成功，按照默认路由将报文转发。<br>\n(2)若上述查找都失败，则该报文被丢弃；同时路由器向发送该数据的源IP地址主机发送ICMP报文，报告网络不可达信息<br>'}]}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3q0X1N3g4AlT2dLYl21mpgYZ">2IP地址和子网掩码</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">IP地址-<font color=green>网络号和主机号</font></p>\n<p><font color=green>网络号(网络地址)</font>:用于标识大规模TCP/IP网际网络（即由网络组成的网络）内的<font color=green>单个网段</font><br>\n<font color=green>主机号(主机地址)</font>，用于识别每个网络内部的<font color=green>TCP/IP节点（工作站、服务器、路由器或其他TCP/IP设备）</font><br>\nIP地址的长度为<font color=green>32位(4字节)</font>，将每个字节转换为十进制数表示并用点分隔<br>\n11000000 10101000 00001011 00010001-&gt;192.168.11.17<br>\n<a href="http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrELRcyF3TwtakPyf5jdt4GoaFs1MbVEnUzOe0LgcI4kKD0sbfsBeP9cY.mxV8wZQplnk9BggdsI*.ULi6DUmhPMc!/b&amp;bo=cAOiAgAAAAABF.M!&amp;rf=viewer_4">IP地址的分类.jpg</a><br>\nA类地址:大型网络-8比特位(第一个字节)作为网络号，后24比特位（后三个字节）作为主机号<br>\nB类地址:中等规模的网络-16比特位（前两个字节）作为网络号，后16比特位（后两个字节）作为主机号<br>\nC类地址:小型网络-24比特位（前三个字节）作为网络号，后8比特位（最后一个字节）作为主机号<br>\nD类地址:多路广播组用户<br>\nE类地址:保留用于实验<br>\n<a href="http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrENhv61pax1QLayTmCRgDIHlsw3amfKyZfGALUZIze3zfL4tYI2764We0bkeOkKn2kUjBnGuCD6UQHXtbX8O86iU!/b&amp;bo=5wNEAQAAAAABF5E!&amp;rf=viewer_4">特殊IP地址.jpg</a><br></p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">IP地址的子网划分</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">子网掩码(32个比特位)</p>区分IP地址的网络位和主机位<br>\n将网络划分为多个子网(判断两台主机是否在同一个网络区段内)<br>\nIP地址为168.95.116.39+子网掩码为255.255.0.0->网络号168.95，主机号116.39<br>\nIP地址为168.95.120.28+子网掩码为255.255.0.0->网络号168.95，主机号120.28<br>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '[子网划分.jpg](http://m.qpic.cn/psc?/V515cgc22da9Gz2vf1DU0GBsYS0ybj6I/TmEUgtj9EK6.7V8ajmQrEP7ukprabtBL1GTtyUK37mqq5rqdnt1cNMLGRh4OCLgDd6.ukZCzZ2qxPN2*pb9MS2Vg1CdulmmJQ8ouXGQybbo!/b&bo=BgMHAwAAAAABFzE!&rf=viewer_4)<br>\n根据所需网络数或子网中的主机数计算需要从IP地址中借用的主机位位数<br>\n①主机位有M位(看后面主机号)，向主机位部分借用n位来划分子网，可划分出`2^n`个子网。<br>\n反之，知道所需网络数，也可以计算出所需借用的主机位位数<br>\n②主机位有M位，划分子网后主机位有m位，则最多可容纳主机数量为`2^{m-2}`台。<br>\n反之，知道子网中的主机数量，也可以计算出所需主机位数。用当前主机位M减去划分子网后的m位，即可得到需借用的主机位位数。<br>\n为各子网编码<br>\n得到确切的借用的主机位位数后，将IP地址用二进制表示，按照借用主机位从全0到全1顺序写出，<br>\n并将其转换为常见的十进制表示方法，即可得到所有子网编码<br>\n计算子网掩码<br>\n将除主机位之外，即网络位和子网位全部写为1，即可得到当前网络的子网掩码<br>\n计算各子网的广播地址<br>\n将IP地址的网络位和子网位全部写为1，主机位写为0，即可得各子网的广播地址<br>\n列出各个子网的IP地址范围<br>\n去除主机位全0（用于子网地址）和全1（用于广播地址）的情况，计算各子网的IP地址范围<br>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">可变长子网掩码</p>对同一个主网络在不同的位置使用不同的子网掩码<br>\n划分子网并保留足够的主机数的同时，将子网进一步分成多个小子网<br>\n将网络划分为三级或更多级子网<br>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">网关</p>一个网络通向其他网络的IP地址<br>\n网关的IP地址是具有路由功能的设备的IP地址，如路由器、三层交换机等<br>\n设置好网关的IP地址，TCP/IP协议才能实现不同网络之间的相互通信<br>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3AvTAl21okgB2m3c3i3q23hQ">3路由器的基本配置</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">1．网络拓扑</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">2．网络参数</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">3．配置过程</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">4．查看配置信息</p>'}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">5．测试配置结果</p>'}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF20jwaZ26N45n2OwtTo2DMGrW">4静态路由</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">静态路由简介</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">网络管理员手动配置的路由信息</p>网络拓扑结构比较简单<br>\n网络管理员需要控制链路或控制路由表(网络的保密性要求较高)<br>\n网络仅通过单个ISP(Internet Service Provider，互联网服务提供商)接入Internet，则该ISP就是网络唯一的Internet出口，所以不必要使用动态路由<br>\n路由器的资源有限，无法运行路由选择协议<br>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">静态路由配置</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">静态路由配置命令</p>', 'children': [{'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">全局配置命令:`ip route  目的网络地址  目的网络子网掩码  转发路径的方式`</p>'}, {'type': 'heading', 'depth': 4, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">转发路径的方式</p>', 'children': [{'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">路由器的物理出接口:转发路径指向本地接口，此时信息由路由器本地接口转发出去</p>'}, {'type': 'heading', 'depth': 5, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">与对端路由器相连接口的IP地址:转发路径指向与对端路由器相连接口的IP地址，即指向下一跳IP地址</p>'}]}]}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">配置默认路由</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">默认路由简介</p>\n<p>当路由表中没有对应于目标网络的路由条目时，路由器将使用默认路由转发数据<br>\n配置默认路由的命令:<code>ip route  0.0.0.0  0.0.0.0  转发路径的方式  Metric值</code><br></p>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF2JagNA34IkuY2C5EnM2mRogV">5动态路由</a></p>', 'children': [{'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">（一）路由协议简介</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">1．RIP（路由信息协议）</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">2．OSPF（开放式最短路径优先）</p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">（二）RIP动态路由配置</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">1．RIP动态路由配置命令</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">2．RIP动态路由配置实例</p>'}]}, {'type': 'heading', 'depth': 2, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">（三）OSPF动态路由配置</p>', 'children': [{'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">1．OSPF动态路由配置命令</p>'}, {'type': 'heading', 'depth': 3, 'payload': {'lines': [0, 1]}, 'content': '<p style="color: blue;font-weight: bold;">2．OSPF动态路由配置实例</p>'}]}]}, {'type': 'heading', 'depth': 1, 'payload': {'lines': [0, 1]}, 'content': '<p><a href="https://cd3e7135.wiz06.com/wapp/pages/view/share/s/3dfD4R2L0ATp2nAPoW2rL2tF3umRIt1kGAVi2M_SeR322s8l">6实现用户对内网服务器和Internet的访问</a></p>'}]})</script></body>
</html>
